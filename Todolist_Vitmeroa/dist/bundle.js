(()=>{const e=document.querySelector(".myUL"),t=(document.querySelector(".myInput"),document.querySelector(".addBtn"),document.querySelector(".cleanBtn"),document.querySelectorAll(".filter-link")),n=document.getElementById("completedCount"),c=document.getElementById("incompleteCount"),s=document.getElementById("totalCount"),o=document.querySelector(".sort-arrow"),a=document.querySelector(".sort-options");function l(){localStorage.setItem("tasks",e.innerHTML)}function i(){const t=e.children.length;s.querySelector("span").textContent=t;let o=0,a=0;for(let t=0;t<e.children.length;t++)e.children[t].classList.contains("checked")?o++:a++;n.querySelector("span").textContent=o,c.querySelector("span").textContent=a;const l=document.querySelector(".white-line"),i=document.querySelector(".task-summary");l.classList.remove("inactive"),i.classList.remove("inactive"),r()}function r(){const e=document.querySelectorAll("li"),t=document.querySelector(".white-line"),n=document.querySelector(".task-summary"),c=document.querySelector(".placeholder");0===e.length?(t.classList.add("inactive"),n.classList.add("inactive"),c.classList.add("hidden")):c.classList.remove("hidden")}document.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("tasks")&&(e.innerHTML=localStorage.getItem("tasks")),i()})),e.addEventListener("click",(function(e){"LI"===e.target.tagName?(e.target.classList.toggle("checked"),i(),l()):e.target.classList.contains("close")&&(e.target.parentElement.remove(),i(),l())})),t.forEach((n=>{n.addEventListener("click",(function(){t.forEach((e=>e.classList.remove("active"))),this.classList.add("active");const n=this.id;e.childNodes.forEach((e=>{"all"===n||"completed"===n&&e.classList.contains("checked")?e.style.display="block":"incomplete"!==n||e.classList.contains("checked")?e.style.display="none":e.style.display="block"}))}))})),a.addEventListener("click",(function(t){if("A"===t.target.tagName){const n=t.target.textContent,c=Array.from(e.children);"Самые новые"===n?c.sort(((e,t)=>t.dataset.timestamp-e.dataset.timestamp)):"Самые старые"===n?c.sort(((e,t)=>e.dataset.timestamp-t.dataset.timestamp)):"А-Я"===n?c.sort(((e,t)=>e.textContent.localeCompare(t.textContent))):"Я-А"===n&&c.sort(((e,t)=>t.textContent.localeCompare(e.textContent))),c.forEach((t=>e.appendChild(t)))}})),o.addEventListener("click",(function(){a.style.display="none"===a.style.display?"block":"none"})),document.addEventListener("click",(function(e){if(e.target.classList.contains("edit")&&!e.target.parentElement.classList.contains("checked")){const t=e.target.parentNode,n=t.firstChild.nodeValue.trim(),c=document.createElement("input");c.type="text",c.value=n,c.className="edit-input",t.replaceChild(c,t.firstChild),c.focus(),c.addEventListener("keypress",(function(e){if("Enter"===e.key){const e=c.value.trim();""!==e?t.replaceChild(document.createTextNode(e),c):alert("Текст задачи не может быть пустым!")}}))}else e.target.classList.contains("edit")&&e.target.parentElement.classList.contains("checked")&&alert("Нельзя редактировать выполненное дело!")})),r()})();